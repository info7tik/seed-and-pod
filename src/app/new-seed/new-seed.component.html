<app-header-menu titleKey="menu.stock.title"></app-header-menu>

<main class="main-content">
    <section class="add-seed-section">
        <div class="section-header">
            <h2>{{'newSeed.addSeed' | transloco}}</h2>
            <a class="add-seed-btn" routerLink="/stock">
                <svg class="add-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M15 19l-7-7 7-7" />
                </svg>
                {{'newSeed.backToStock' | transloco}}
            </a>
        </div>

        @if (errorMessage) {
        <div class="error">{{ errorMessage }}</div>
        }
        @if (successMessage) {
        <div class="success">{{ successMessage }}</div>
        }

        <form (ngSubmit)="addSeed()" #seedForm="ngForm" class="seed-form">
            <div class="form-field">
                <label for="name">{{'newSeed.name' | transloco}}</label>
                <input id="name" name="name" type="text" required [(ngModel)]="name" />
            </div>

            <div class="form-field">
                <label for="family">{{'newSeed.family' | transloco}}</label>
                <select id="family" name="family" required [(ngModel)]="family">
                    <option value="">{{'newSeed.selectFamily' | transloco}}</option>
                    @for (family of vegetableFamilies; track family) {
                    <option [value]="family">{{ family }}</option>
                    }
                </select>
            </div>

            <div class="form-field">
                <label>{{'newSeed.sowingDate' | transloco}}</label>
                <div class="date-inputs">
                    <select id="sowingDay" name="sowingDay" [(ngModel)]="sowingDay">
                        @for (day of daysInMonth; track day) {
                        <option [value]="day">{{ day }}</option>
                        }
                    </select>
                    <select id="sowingMonth" name="sowingMonth" [(ngModel)]="sowingMonth">
                        @for (month of months; track month; let i = $index) {
                        <option [value]="i + 1">{{ month }}</option>
                        }
                    </select>
                </div>
            </div>

            <div class="form-field">
                <label class="checkbox-label">
                    <input type="checkbox" [(ngModel)]="enableTransplanting" name="enableTransplanting" />
                    {{'newSeed.enableTransplanting' | transloco}}
                </label>
            </div>

            @if (enableTransplanting) {
            <div class="form-field">
                <label>{{'newSeed.transplantingDate' | transloco}}</label>
                <div class="date-inputs">
                    <select id="transplantingDay" name="transplantingDay" [(ngModel)]="transplantingDay">
                        @for (day of daysInMonth; track day) {
                        <option [value]="day">{{ day }}</option>
                        }
                    </select>
                    <select id="transplantingMonth" name="transplantingMonth" [(ngModel)]="transplantingMonth">
                        @for (month of months; track month; let i = $index) {
                        <option [value]="i + 1">{{ month }}</option>
                        }
                    </select>
                </div>
            </div>
            }

            <div class="form-field">
                <label for="daysBeforeHarvest">{{'newSeed.daysBeforeHarvest' | transloco}}</label>
                <input id="daysBeforeHarvest" name="daysBeforeHarvest" type="number" min="1" required
                    [(ngModel)]="daysBeforeHarvest" />
            </div>

            <button class="action-btn" type="submit" [disabled]="!name || !family">
                {{'newSeed.addSeed' | transloco}}
            </button>
        </form>
    </section>
</main>