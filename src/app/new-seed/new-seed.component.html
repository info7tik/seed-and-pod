<app-header-menu titleKey="menu.stock.title"></app-header-menu>

<main class="main-content">
    <section class="add-seed-section">
        <div class="section-header">
            <h2>Add a new available seed</h2>
            <a class="add-seed-btn" routerLink="/stock">
                <svg class="add-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M15 19l-7-7 7-7" />
                </svg>
                Back to stock
            </a>
        </div>

        @if (errorMessage) {
        <div class="error">{{ errorMessage }}</div>
        }
        @if (successMessage) {
        <div class="success">{{ successMessage }}</div>
        }

        <form (ngSubmit)="addSeed()" #seedForm="ngForm" class="seed-form">
            <div class="form-field">
                <label for="name">Name</label>
                <input id="name" name="name" type="text" required [(ngModel)]="name" />
            </div>

            <div class="form-field">
                <label for="family">Family</label>
                <select id="family" name="family" required [(ngModel)]="family">
                    <option value="">Select a family...</option>
                    @for (family of vegetableFamilies; track family) {
                    <option [value]="family">{{ family }}</option>
                    }
                </select>
            </div>

            <div class="form-field">
                <label for="sowingDate">Sowing Date</label>
                <input id="sowingDate" name="sowingDate" type="date" required [(ngModel)]="sowingDate" />
            </div>

            <div class="form-field">
                <label class="checkbox-label">
                    <input type="checkbox" [(ngModel)]="enableTransplanting" name="enableTransplanting" />
                    Enable transplanting
                </label>
            </div>

            @if (enableTransplanting) {
            <div class="form-field">
                <label for="transplantingDate">Transplanting Date</label>
                <input id="transplantingDate" name="transplantingDate" type="date" required
                    [(ngModel)]="transplantingDate" />
            </div>
            }

            <div class="form-field">
                <label for="daysBeforeHarvest">Days Before Harvest</label>
                <input id="daysBeforeHarvest" name="daysBeforeHarvest" type="number" min="1" required
                    [(ngModel)]="daysBeforeHarvest" />
            </div>

            <button class="action-btn" type="submit"
                [disabled]="!name || !family || !sowingDate || !daysBeforeHarvest || (enableTransplanting && !transplantingDate)">
                Add seed
            </button>
        </form>
    </section>
</main>